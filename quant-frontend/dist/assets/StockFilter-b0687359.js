import{r as x,k as N,p as H,q as E,c as u,o as w,d as B,f as l,w as t,m as $,n as J,e as f,i,F as K,s as Q,h as g,t as c,E as b,x as W,y as X,z as Y}from"./index-105ea695.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";const h={class:"stock-filter"},ll={class:"card-header"},el={__name:"StockFilter",setup(al){const o=x({stockCode:"",industry:"",area:"",peMin:null,peMax:null,pbMin:null,pbMax:null,marketCapMin:null,marketCapMax:null,rsiMin:null,rsiMax:null,maRelation:"",debtRatioMin:null,debtRatioMax:null,currentRatioMin:null,currentRatioMax:null}),v=x([]),C=x(!1),_=x(!1),U=N(()=>v.value.length>0),z=N(()=>v.value),D=async()=>{C.value=!0;try{const n={...o.value};n.marketCapMin!==null&&(n.marketCapMin=n.marketCapMin/1e4),n.marketCapMax!==null&&(n.marketCapMax=n.marketCapMax/1e4);const e=await E.post("/stocks/filter",n);v.value=e.data.stocks,b.success(`筛选完成，找到 ${v.value.length} 只符合条件的股票`)}catch(n){b.error("筛选失败，请重试"),console.error("筛选错误:",n)}finally{C.value=!1}},I=()=>{Object.keys(o.value).forEach(n=>{typeof o.value[n]=="string"?o.value[n]="":o.value[n]=null}),v.value=[],b.info("筛选条件已重置")},P=()=>{b.success("导出功能开发中...")},T=n=>{b.info(`查看 ${n.stockName} 详情`)},j=n=>{b.success(`已将 ${n.stockName} 加入策略`)},F=x([]);return H(async()=>{try{const n=await E.get("/stocks/industries");F.value=n.data.industries}catch(n){console.error("加载行业列表失败:",n)}}),(n,e)=>{const M=u("el-divider"),q=u("el-input"),r=u("el-form-item"),m=u("el-col"),d=u("el-option"),R=u("el-select"),k=u("el-row"),s=u("el-input-number"),A=u("el-switch"),y=u("el-icon"),V=u("el-button"),L=u("el-form"),S=u("el-card"),p=u("el-table-column"),O=u("el-table");return w(),B("div",h,[l(S,{class:"filter-card"},{header:t(()=>[...e[17]||(e[17]=[f("div",{class:"card-header"},[f("span",null,"股票筛选器")],-1)])]),default:t(()=>[l(L,{model:o.value,"label-width":"120px",class:"filter-form"},{default:t(()=>[l(M,{"content-position":"left"},{default:t(()=>[...e[18]||(e[18]=[i("基本信息",-1)])]),_:1}),l(k,{gutter:20},{default:t(()=>[l(m,{span:8},{default:t(()=>[l(r,{label:"股票代码"},{default:t(()=>[l(q,{modelValue:o.value.stockCode,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.stockCode=a),placeholder:"请输入股票代码"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"行业分类"},{default:t(()=>[l(R,{modelValue:o.value.industry,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.industry=a),placeholder:"请选择行业",clearable:""},{default:t(()=>[l(d,{label:"全部",value:""}),(w(!0),B(K,null,Q(F.value,a=>(w(),$(d,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"地区分布"},{default:t(()=>[l(R,{modelValue:o.value.area,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.area=a),placeholder:"请选择地区",clearable:""},{default:t(()=>[l(d,{label:"全部",value:""}),l(d,{label:"北京",value:"北京"}),l(d,{label:"上海",value:"上海"}),l(d,{label:"广东",value:"广东"}),l(d,{label:"浙江",value:"浙江"}),l(d,{label:"江苏",value:"江苏"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(M,{"content-position":"left"},{default:t(()=>[...e[19]||(e[19]=[i("估值指标",-1)])]),_:1}),l(k,{gutter:20},{default:t(()=>[l(m,{span:8},{default:t(()=>[l(r,{label:"市盈率(PE)"},{default:t(()=>[l(s,{modelValue:o.value.peMin,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.peMin=a),placeholder:"最小值",min:0},null,8,["modelValue"]),e[20]||(e[20]=f("span",{style:{margin:"0 10px"}},"-",-1)),l(s,{modelValue:o.value.peMax,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.peMax=a),placeholder:"最大值",min:0},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"市净率(PB)"},{default:t(()=>[l(s,{modelValue:o.value.pbMin,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.pbMin=a),placeholder:"最小值",min:0},null,8,["modelValue"]),e[21]||(e[21]=f("span",{style:{margin:"0 10px"}},"-",-1)),l(s,{modelValue:o.value.pbMax,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.pbMax=a),placeholder:"最大值",min:0},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"市值(万元)"},{default:t(()=>[l(s,{modelValue:o.value.marketCapMin,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.marketCapMin=a),placeholder:"最小值",min:0},null,8,["modelValue"]),e[22]||(e[22]=f("span",{style:{margin:"0 10px"}},"-",-1)),l(s,{modelValue:o.value.marketCapMax,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.marketCapMax=a),placeholder:"最大值",min:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(M,{"content-position":"left"},{default:t(()=>[...e[23]||(e[23]=[i("技术指标",-1)])]),_:1}),l(k,{gutter:20},{default:t(()=>[l(m,{span:8},{default:t(()=>[l(r,{label:"RSI相对强弱"},{default:t(()=>[l(s,{modelValue:o.value.rsiMin,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.rsiMin=a),placeholder:"最小值",min:0,max:100},null,8,["modelValue"]),e[24]||(e[24]=f("span",{style:{margin:"0 10px"}},"-",-1)),l(s,{modelValue:o.value.rsiMax,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.rsiMax=a),placeholder:"最大值",min:0,max:100},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"均线关系"},{default:t(()=>[l(R,{modelValue:o.value.maRelation,"onUpdate:modelValue":e[11]||(e[11]=a=>o.value.maRelation=a),placeholder:"请选择均线关系",clearable:""},{default:t(()=>[l(d,{label:"全部",value:""}),l(d,{label:"价格上穿5日均线",value:"price_above_ma5"}),l(d,{label:"价格下穿5日均线",value:"price_below_ma5"}),l(d,{label:"5日均线上穿20日均线",value:"ma5_above_ma20"}),l(d,{label:"5日均线下穿20日均线",value:"ma5_below_ma20"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(M,{"content-position":"left"},{default:t(()=>[...e[25]||(e[25]=[i("财务指标",-1)])]),_:1}),l(k,{gutter:20},{default:t(()=>[l(m,{span:8},{default:t(()=>[l(r,{label:"资产负债率(%)"},{default:t(()=>[l(s,{modelValue:o.value.debtRatioMin,"onUpdate:modelValue":e[12]||(e[12]=a=>o.value.debtRatioMin=a),placeholder:"最小值",min:0,max:100},null,8,["modelValue"]),e[26]||(e[26]=f("span",{style:{margin:"0 10px"}},"-",-1)),l(s,{modelValue:o.value.debtRatioMax,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value.debtRatioMax=a),placeholder:"最大值",min:0,max:100},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"流动比率"},{default:t(()=>[l(s,{modelValue:o.value.currentRatioMin,"onUpdate:modelValue":e[14]||(e[14]=a=>o.value.currentRatioMin=a),placeholder:"最小值",min:0},null,8,["modelValue"]),e[27]||(e[27]=f("span",{style:{margin:"0 10px"}},"-",-1)),l(s,{modelValue:o.value.currentRatioMax,"onUpdate:modelValue":e[15]||(e[15]=a=>o.value.currentRatioMax=a),placeholder:"最大值",min:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(r,{"label-width":"120px"},{default:t(()=>[l(A,{modelValue:_.value,"onUpdate:modelValue":e[16]||(e[16]=a=>_.value=a),"active-text":"精确显示","inactive-text":"格式化显示","active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]),_:1}),l(r,null,{default:t(()=>[l(V,{type:"primary",onClick:D,loading:C.value},{default:t(()=>[l(y,null,{default:t(()=>[l(g(W))]),_:1}),e[28]||(e[28]=i(" 筛选股票 ",-1))]),_:1},8,["loading"]),l(V,{onClick:I},{default:t(()=>[l(y,null,{default:t(()=>[l(g(X))]),_:1}),e[29]||(e[29]=i(" 重置条件 ",-1))]),_:1}),l(V,{type:"success",onClick:P,disabled:!U.value},{default:t(()=>[l(y,null,{default:t(()=>[l(g(Y))]),_:1}),e[30]||(e[30]=i(" 导出结果 ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])]),_:1}),U.value?(w(),$(S,{key:0,class:"result-card"},{header:t(()=>[f("div",ll,[f("span",null,"筛选结果 ("+c(v.value.length)+" 只股票)",1)])]),default:t(()=>[l(O,{data:z.value,stripe:"",style:{width:"100%"}},{default:t(()=>[l(p,{prop:"stockCode",label:"股票代码",width:"120"}),l(p,{prop:"stockName",label:"股票名称",width:"150"}),l(p,{prop:"industry",label:"行业",width:"120"}),l(p,{prop:"area",label:"地区",width:"100"}),l(p,{prop:"peRatio",label:"市盈率",width:"100"}),l(p,{prop:"pbRatio",label:"市净率",width:"100"}),l(p,{label:"市值(万)",width:"120"},{default:t(a=>[i(c(a.row.marketCap?_.value?a.row.marketCap*1e4:(a.row.marketCap*1e4).toFixed(2):"-"),1)]),_:1}),l(p,{prop:"rsi",label:"RSI",width:"80"}),l(p,{label:"资产负债率%",width:"120"},{default:t(a=>[i(c(a.row.debtRatio?_.value?a.row.debtRatio:a.row.debtRatio.toFixed(2):"-"),1)]),_:1}),l(p,{label:"流动比率",width:"100"},{default:t(a=>[i(c(a.row.currentRatio?_.value?a.row.currentRatio:a.row.currentRatio.toFixed(2):"-"),1)]),_:1}),l(p,{label:"操作",width:"150"},{default:t(a=>[l(V,{size:"small",onClick:G=>T(a.row)},{default:t(()=>[...e[31]||(e[31]=[i("详情",-1)])]),_:1},8,["onClick"]),l(V,{size:"small",type:"primary",onClick:G=>j(a.row)},{default:t(()=>[...e[32]||(e[32]=[i("加入策略",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):J("",!0)])}}},nl=Z(el,[["__scopeId","data-v-6193793d"]]);export{nl as default};
